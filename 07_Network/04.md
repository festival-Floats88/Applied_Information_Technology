# **4. トランスポート層**

## **1. コネクション/コネクションレス**

TCP/IPのトランスポート層には, 信頼性の高い**コネクション型**の通信方式と, 簡素で高速な**コネクションレス型**の通信が用意されている.

コネクション型通信は, 信頼性を高めるため, 以下の各種制御を行う.

- パケットの**順序制御**
- 誤りを検出した際の**再送制御**
- 受信能力の範囲内でパケットを送信する**フロー制御**

これに対し, コネクションレス型は「パケットを送ること」のみを目的とする方式で, 各種制御を省いた高速な通信を実現する.

## **2. TCP**

**TCP**は, TCP/IPのトランスポート層のプロトコルの1つで, 信頼性の高いコネクション型の通信機能を提供する. 電子メールやファイル転送, HTTPなどの信頼性の高い通信機能が必要なアプリケーションは, トランスポート層のプロトコルにTCPを選ぶ.

TCPは, 通信に先立って**TCPコネクション**と呼ばれる論理的な通信路を確立し, 通信終了時にそれを解放する. コネクション確立のため, **スリーウェイハンドシェイク**と呼ばれる手順を行う. スリーウェイハンドシェイクの手順は以下のとおりである.

1. 一方のノードからコネクション確立要求を出す
2. もう一方のノードが1.に対する肯定応答を行い, コネクション確立要求を出す
3. 2.に対する工程応答を行う

## **3. UDP**

**UDP**は, TCP/IPｍｐトランスポート層のプロトコルの1つで, コネクションレス型の簡素な通信機能を提供する. IP電話や動画の配信, SNMO(ネットワーク管理)など, 少々の乱れよりも高いリアルタイム性を重視するアプリケーションは, トランスポート層のプロトコルにUDPを用いる.

## **4. フロー制御**

**フロー制御**は通信相手の受信能力を超えないよう, 送信データの量を調整する制御である. TCPでは**ウィンドウサイズ**を送信相手から適宜通知してもらい, ウィンドウサイズの範囲内でデータを連続送信する.

> **ウィンドウサイズ**: 連続受信できるデータ量

## **5. ポート番号**

**ポート番号**は, 16bitからなるプロセスの識別番号である. ポート番号とホストを識別するIPアドレスを組み合わせれば「どのホストのどのプロセスか」を識別することができる.

サーバなどの常駐プロセスには, 予め定まったポート番号(**ウェルノウンポート番号**)が与えられる. クライアントのプロセスには, 起動毎に空き番号が与えられる.
